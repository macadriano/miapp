// Configuración de WayGPS Frontend
// Modifica estos valores según tu configuración

const CONFIG = {
    // URL base de tu API Django: usa el mismo origen que la página
    API_BASE_URL: window.location.origin || 'http://127.0.0.1:8000',

    // Endpoint específico para móviles
    MOVILES_ENDPOINT: '/moviles/api/moviles/',

    // URL del frontend de móviles
    MOVILES_FRONTEND_URL: '/moviles/dashboard/',

    // Configuración de actualización automática (en milisegundos)
    AUTO_REFRESH_INTERVAL: 30000, // 30 segundos

    // Configuración del mapa
    MAP: {
        DEFAULT_LAT: -34.6037,
        DEFAULT_LON: -58.3816,
        DEFAULT_ZOOM: 10,
        TILE_PROVIDER: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        ATTRIBUTION: '© OpenStreetMap contributors'
    },

    STATUS: {
        ONLINE_THRESHOLD_MINUTES: 15,
        ONLINE_COLOR: 'green',
        OFFLINE_COLOR: 'red',
        IGNITION_ON_COLOR: '#d4edda',
        IGNITION_OFF_COLOR: '#f8d7da'
    },

    UI: {
        ALERT_DURATION: 5000,
        ITEMS_PER_PAGE: 50,
        ENABLE_ANIMATIONS: true,
        THEME: 'light'
    },

    FORM: {
        REQUIRED_FIELDS: ['patente'],
        VALIDATIONS: {
            PATENTE_MIN_LENGTH: 3,
            PATENTE_MAX_LENGTH: 10,
            VIN_LENGTH: 17,
            ANIO_MIN: 1900,
            ANIO_MAX: 2030
        }
    },

    REPORTS: {
        AVAILABLE_REPORTS: [
            'ubicacion_actual',
            'historial_rutas',
            'consumo_combustible',
            'tiempos_parada',
            'velocidades_exceso'
        ],
        DEFAULT_PERIODS: [
            'hoy',
            'ayer',
            'ultima_semana',
            'ultimo_mes',
            'personalizado'
        ]
    },

    NOTIFICATIONS: {
        ENABLE_BROWSER_NOTIFICATIONS: false,
        TYPES: {
            MOVIL_CONECTADO: 'success',
            MOVIL_DESCONECTADO: 'warning',
            VELOCIDAD_EXCESO: 'danger',
            BATERIA_BAJA: 'warning'
        }
    },

    DEBUG: {
        ENABLE_CONSOLE_LOGS: true,
        SHOW_DEBUG_INFO: false,
        MOCK_DATA: false
    }
};

// Función para obtener la URL completa de la API
function getApiUrl(endpoint = '') {
    const base = CONFIG.API_BASE_URL.replace(/\/$/, '');
    const apiPath = CONFIG.MOVILES_ENDPOINT.startsWith('/')
        ? CONFIG.MOVILES_ENDPOINT
        : `/${CONFIG.MOVILES_ENDPOINT}`;
    const extra = endpoint
        ? (endpoint.startsWith('/') ? endpoint : `/${endpoint}`)
        : '';

    return `${base}${apiPath}${extra}`;
}

function isDebugMode() {
    return CONFIG.DEBUG.ENABLE_CONSOLE_LOGS;
}

function debugLog(message, data = null) {
    if (isDebugMode()) {
        console.log(`[WayGPS] ${message}`, data || '');
    }
}

function getConfig(path) {
    return path.split('.').reduce((obj, key) => obj && obj[key], CONFIG);
}

// Exportar configuración para uso global
window.WAYGPS_CONFIG = CONFIG;
window.getApiUrl = getApiUrl;
window.debugLog = debugLog;
window.getConfig = getConfig;

console.log('WAYGPS_CONFIG cargado:', window.WAYGPS_CONFIG);

